var winWidth, winHeight;
var maxImg = 4, nowImg = 0;
document.write("<script src=\"http://res.wx.qq.com/open/js/jweixin-1.0.0.js\" > <\/script>");
$(function () {
	winWidth = $(window).width();
	winHeight = $(window).height();
	var code_url = window.location.href;
	code_url = encodeURIComponent(code_url);
	code_url = code_url.split('#')[0];
	$.get('/wx_api/jssdk.aspx?minor_name=cd&minor_url=' + code_url + '&d=' + new Date().getTime(), function (data) {
	    data = JSON.parse(data);
	    wx.config({
	        debug: false,
	        appId: data.appId,
	        timestamp: data.timestamp,
	        nonceStr: data.nonceStr,
	        signature: data.signature,
	        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'startRecord', 'stopRecord', 'playVoice', 'uploadVoice', 'downloadVoice']
	    });
	});

	var shareData = { title: '涨声', desc: '涨声，听听财富涨潮的声音', link: 'http://zs.gtl666.com', imgUrl: 'http://zs.gtl666.com/img/free.png', type: '', dataUrl: '', success: function (res) { }, cancel: function (res) { } };
	wx.ready(function () {
	    wx.onMenuShareTimeline({
	        title: shareData.desc,
	        link: shareData.link,
	        imgUrl: shareData.imgUrl,
	        success: shareData.success,
	        cancel: shareData.cancel
	    });

	    wx.onMenuShareAppMessage({
	        title: shareData.title,
	        desc: shareData.desc,
	        link: shareData.link,
	        imgUrl: shareData.imgUrl,
	        type: shareData.type,
	        dataUrl: shareData.dataUrl,
	        success: shareData.success,
	        cancel: shareData.cancel
	    });
	});
});

function loadmask(dos) {
  if (dos) {
    var loads = '<div id="loadingss" style="width:100%; height:100%; position:fixed; left:0; top:0; background:url(../img/loading1.gif) #000 no-repeat center center;"></div>';
    $("body").append(loads);
    $("#loadingss").height($(window).height());
    $("#loadingss").css({ opacity: 0, "z-index": 999999 });
    $("#loadingss").animate({ opacity: 0.6 }, 500);
  } else {
    $("#loadingss").animate({ opacity: 0 }, 500, function () {
      $("#loadingss").remove();
    });
  }
}

function trace(str, callback) {
  var loads = '<div id="tracebg" style="width:100%;height:100%; position:fixed; left:0; top:0; background:#000; font-size:1em;"></div><div id="tracebox" style="width:76%; position:absolute; left:11%; top:30%; background:#fff; border-radius:8px; padding:3em 1% 1% 1%; text-align:center; font-size:1em; color:#333;"><div style="padding:0 2em 0 2em;">' + str + '</div><br><br><br><font style="width:100%; display:block; line-height:35px; margin:0 auto; border-radius:5px; color:#000; border-top:1px solid #efefef;">知道了</font></div>';
  $("body").append(loads);
  $("#tracebg").height($(window).height());
  $("#tracebg").css({ opacity: 0, "z-index": 999999 });
  $("#tracebox").css({ opacity: 0, "z-index": 1000000 });
  $("#tracebg").animate({ opacity: 0.6 }, 200, function () {
    $("#tracebox").animate({ opacity: 0.95 }, 300);
  });

  $("#tracebox").click(function () {
    $("#tracebox").animate({ opacity: 0 }, 300, function () {
      $("#tracebg").animate({ opacity: 0 }, 200, function () {
        $("#tracebg").remove();
        $("#tracebox").remove();
        if (callback) callback();
      });
    });
  });
}

function getQueryString(name) {
  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
  var r = window.location.search.substr(1).match(reg);
  if (r != null)
    return unescape(r[2]);
  return "";
}

function getCookie(name) {
    var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
    if (arr = document.cookie.match(reg))
        return unescape(arr[2]);
    else
        return '';
} 