package com.admin.service.impl;

import java.util.List;
import java.util.UUID;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.admin.dao.TgwdszDaoI;
import com.admin.model.Ad;
import com.admin.model.Tgwdsz;
import com.admin.service.TgwdszServiceI;
import com.web.util.TimeUtils;

@Service
public class TgwdszServiceImpl implements TgwdszServiceI {

	@Autowired
	private TgwdszDaoI dao;

	/**
	 * 新增或者修改
	 */
	@Override
	public void add(Tgwdsz t) throws Exception {
		String hql = "from Tgwdsz where tgid='" + t.getTgid() + "'";
		List<Tgwdsz> list = dao.find(hql);
		if (list.size() > 0) {
			Tgwdsz tt = list.get(0);
			tt.setSl(t.getSl());
			tt.setJf(t.getJf());
			dao.update(tt);
		} else {
			t.setId(UUID.randomUUID().toString());
			dao.save(t);
		}
	}

	/**
	 * 删除
	 */
	@Override
	public void delete(String id) throws Exception {
		Tgwdsz ad = dao.get(Tgwdsz.class, id);
		dao.delete(ad);
	}

	/**
	 * 修改
	 */
	@Override
	public void update(Tgwdsz t) throws Exception {
		Tgwdsz a = dao.get(Tgwdsz.class, t.getId());
		a.setJf(t.getJf());
		a.setSl(t.getSl());
		dao.update(a);
	}

	/**
	 * 得到对象
	 */
	@Override
	public Tgwdsz get(String id) throws Exception {
		return dao.get(Tgwdsz.class, id);
	}

	@Override
	public Tgwdsz getByTgid(String tgid) throws Exception {
		String hql = "from Tgwdsz where tgid='" + tgid + "'";
		Tgwdsz t = dao.get(hql);
		return t;
	}
}
