package com.web.controller;

import org.apache.commons.lang3.StringUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.admin.model.LoginUser;
import com.admin.service.LoginUserServiceI;
import com.web.exception.BusinessDealException;
import com.web.exception.BusinessValidateException;
import com.web.exception.CodeEnum;
import com.web.exception.PatternException;
import com.web.result.BaseObjectResult;
import com.web.result.CreateOrder;

@Controller
@RequestMapping("/test")
public class TestOneController {
	@Autowired
	private LoginUserServiceI service;
	
	@RequestMapping(value="/all", method= {RequestMethod.GET,RequestMethod.POST},produces = { MediaType.APPLICATION_JSON_VALUE } )
	public BaseObjectResult<LoginUser> getUserById(String id){
		LoginUser lg=new LoginUser();
		BaseObjectResult<LoginUser> baseLog=null;
		try {
			if (StringUtils.isNotBlank(id)) {
				 lg=service.getLoginUser(id);
				
			}else{
				throw new PatternException("id不能为空！");
			}
			if (lg!= null) {
				baseLog.setResult(lg);
				
			}
		}  catch (PatternException e) {
			//System.out.println("参数校验失败," + e.getMessage());
			baseLog = new BaseObjectResult<LoginUser>(
					CodeEnum.PATTERN_ERROR.getCode(), e.getMessage());
		} catch (BusinessDealException e) {
			//System.out.println("业务处理异常， 错误信息：" + e.getMessage());
			baseLog = new BaseObjectResult<LoginUser>(
					CodeEnum.BUSSINESS_HANDLE_ERROR.getCode(), e.getMessage());
		} catch (BusinessValidateException e) {
			//System.out.println("业务验证异常， 错误信息：" + e.getMessage());
			baseLog = new BaseObjectResult<LoginUser>(
					CodeEnum.BUSSINESS_VALIDATE_ERROR.getCode(), e.getMessage());
		} catch (Exception e) {
			e.printStackTrace();
			//System.out.println("系统异常，" + e.getMessage());
			baseLog = new BaseObjectResult<LoginUser>(
					CodeEnum.SYSTEM_ERROR.getCode(), "系统异常");
		}
		
		
		return baseLog;
		
		
	}
}
