package com.web.util;

import java.util.Calendar;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;

import org.springframework.beans.factory.annotation.Autowired;

import com.admin.controller.GqbController;
import com.admin.service.GqbServiceI;
import com.admin.service.impl.GqbServiceImpl;
import com.alibaba.fastjson.JSONObject;

public class CzdTestTimer {
	static int count = 0;

	@Autowired
	private GqbServiceI gqbServiceI;

	public static void showTimer() {
		TimerTask task = new TimerTask() {
			@Override
			public void run() {
				++count;
				// 添加需要执行的任务
				GqbServiceImpl gqbServiceImpl = new GqbServiceImpl();
				try {
					gqbServiceImpl.czdjs();
				} catch (Exception e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		};

		// 设置执行时间
		Calendar calendar = Calendar.getInstance();
		int year = calendar.get(Calendar.YEAR);
		int month = calendar.get(Calendar.MONTH);
		int day = calendar.get(Calendar.DAY_OF_MONTH);// 每天
		int day_of_week = calendar.get(Calendar.DAY_OF_WEEK) - 1; // 获取星期数（星期天 -
																	// 星期六：1-7）

		if (day_of_week >= 1 && day_of_week <= 5) {
			// 定制每天的15:05:00执行，
			calendar.set(year, month, day, 15, 05, 00);
			Date date = calendar.getTime();
			Timer timer = new Timer();

			//System.out.println(date);

			int period = 24 * 60 * 60 * 1000;// 执行的时间间隔，1000为1秒，60*1000为1分钟，60*60*1000为一小时，24*60*60*1000为一天
			int period1 = 1000 * 60;
			// timer.schedule(task, date, period1);
			// 每天的date时刻执行task, 仅执行一次
			timer.schedule(task, date);
		} else {
			//System.out.println("非交易日，不结算！");
		}

	}

	public static void main(String[] args) {
		showTimer();
	}
}